<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/default}">
<head>
    <title th:text="${product.name + ' - PeakMeShop'}">상품명 - PeakMeShop</title>
</head>
<body>
<div layout:fragment="content">
    <!-- 상품 상세 정보 -->
    <section class="product-detail-section py-5">
        <div class="container">
            <div class="row">
                <!-- 상품 이미지 -->
                <div class="col-md-6 mb-4 mb-md-0">
                    <div class="product-images">
                        <div class="product-main-image mb-3">
                            <img th:src="${product.images[0]}" alt="상품 이미지" class="img-fluid" id="mainImage">
                        </div>
                        <div class="product-thumbnails">
                            <div class="row">
                                <div class="col-3 mb-3" th:each="image, stat : ${product.images}">
                                    <div class="thumbnail-item" th:classappend="${stat.index == 0 ? 'active' : ''}"
                                         th:onclick="'changeMainImage(\'' + ${image} + '\')'">
                                        <img th:src="${image}" alt="썸네일 이미지" class="img-fluid">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 상품 정보 -->
                <div class="col-md-6">
                    <div class="product-info">
                        <div class="product-badges mb-2">
                            <span class="badge bg-success me-2" th:if="${product.isNew}">NEW</span>
                            <span class="badge bg-danger me-2" th:if="${product.discountRate > 0}" th:text="${product.discountRate + '% OFF'}">20% OFF</span>
                            <span class="badge bg-primary me-2" th:if="${product.isBestSeller}">BEST</span>
                        </div>

                        <h1 class="product-title mb-2" th:text="${product.name}">상품명</h1>

                        <div class="product-rating mb-3">
                            <div class="stars">
                                <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, product.rating)}"></i>
                                <i class="far fa-star" th:each="i : ${#numbers.sequence(product.rating + 1, 5)}"></i>
                            </div>
                            <span class="rating-count" th:text="${'(' + product.reviewCount + ' 리뷰)'}">리뷰 수</span>
                        </div>

                        <div class="product-price mb-3">
                            <span class="current-price" th:text="${#numbers.formatCurrency(product.price)}">10,000원</span>
                            <span class="original-price" th:if="${product.originalPrice > product.price}"
                                  th:text="${#numbers.formatCurrency(product.originalPrice)}">12,000원</span>
                        </div>

                        <div class="product-description mb-4" th:utext="${product.shortDescription}">
                            상품 간단 설명
                        </div>

                        <div class="product-meta mb-4">
                            <div class="meta-item d-flex mb-2">
                                <span class="meta-label">브랜드:</span>
                                <span class="meta-value">
                                    <a th:href="@{/shop/brand/{id}(id=${product.brand.id})}" th:text="${product.brand.name}">브랜드명</a>
                                </span>
                            </div>
                            <div class="meta-item d-flex mb-2">
                                <span class="meta-label">카테고리:</span>
                                <span class="meta-value">
                                    <a th:href="@{/shop/category/{id}(id=${product.category.id})}" th:text="${product.category.name}">카테고리명</a>
                                </span>
                            </div>
                            <div class="meta-item d-flex mb-2">
                                <span class="meta-label">재고:</span>
                                <span class="meta-value" th:text="${product.stock > 0 ? product.stock + '개 남음' : '품절'}">재고 상태</span>
                            </div>
                            <div class="meta-item d-flex mb-2">
                                <span class="meta-label">배송:</span>
                                <span class="meta-value" th:text="${product.freeShipping ? '무료 배송' : '유료 배송'}">배송 정보</span>
                            </div>
                        </div>

                        <!-- 옵션 선택 -->
                        <div class="product-options mb-4" th:if="${!product.options.isEmpty()}">
                            <div class="option-group mb-3" th:each="option : ${product.options}">
                                <label th:for="${'option-' + option.name}" th:text="${option.name}">옵션명</label>
                                <select class="form-select" th:id="${'option-' + option.name}">
                                    <option value="">선택하세요</option>
                                    <option th:each="value : ${option.values}" th:value="${value}" th:text="${value}">옵션값</option>
                                </select>
                            </div>
                        </div>

                        <!-- 수량 선택 -->
                        <div class="product-quantity mb-4">
                            <label for="quantity">수량</label>
                            <div class="quantity-input">
                                <button type="button" class="quantity-btn minus" onclick="decreaseQuantity()">-</button>
                                <input type="number" id="quantity" class="form-control" value="1" min="1" max="99">
                                <button type="button" class="quantity-btn plus" onclick="increaseQuantity()">+</button>
                            </div>
                        </div>

                        <!-- 구매 버튼 -->
                        <div class="product-actions mb-4">
                            <button class="btn btn-primary btn-lg me-2 add-to-cart"
                                    th:onclick="'addToCart(' + ${product.id} + ', parseInt(document.getElementById(\'quantity\').value))'">
                                <i class="fas fa-shopping-cart"></i> 장바구니 담기
                            </button>
                            <button class="btn btn-success btn-lg buy-now"
                                    th:onclick="'buyNow(' + ${product.id} + ', parseInt(document.getElementById(\'quantity\').value))'">
                                바로 구매하기
                            </button>
                            <button class="btn btn-outline-secondary btn-lg ms-2 add-to-wishlist"
                                    th:onclick="'addToWishlist(' + ${product.id} + ')'">
                                <i class="far fa-heart"></i>
                            </button>
                        </div>

                        <!-- 공유 버튼 -->
                        <div class="product-share">
                            <span class="share-label">공유하기:</span>
                            <div class="share-buttons">
                                <button class="btn btn-sm btn-outline-secondary me-2" onclick="shareOnFacebook()">
                                    <i class="fab fa-facebook-f"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary me-2" onclick="shareOnTwitter()">
                                    <i class="fab fa-twitter"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary me-2" onclick="shareOnKakao()">
                                    <i class="fas fa-comment"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary" onclick="copyProductLink()">
                                    <i class="fas fa-link"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 상품 상세 탭 -->
    <section class="product-tabs py-5 bg-light">
        <div class="container">
            <ul class="nav nav-tabs" id="productTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description"
                            type="button" role="tab" aria-controls="description" aria-selected="true">상세 설명</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="specs-tab" data-bs-toggle="tab" data-bs-target="#specs"
                            type="button" role="tab" aria-controls="specs" aria-selected="false">상품 정보</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews"
                            type="button" role="tab" aria-controls="reviews" aria-selected="false">
                        리뷰 <span class="badge bg-secondary" th:text="${product.reviewCount}">0</span>
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="shipping-tab" data-bs-toggle="tab" data-bs-target="#shipping"
                            type="button" role="tab" aria-controls="shipping" aria-selected="false">배송/환불 정책</button>
                </li>
            </ul>
            <div class="tab-content p-4 bg-white" id="productTabContent">
                <!-- 상세 설명 탭 -->
                <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                    <div class="product-description" th:utext="${product.description}">
                        상품 상세 설명
                    </div>
                </div>

                <!-- 상품 정보 탭 -->
                <div class="tab-pane fade" id="specs" role="tabpanel" aria-labelledby="specs-tab">
                    <div class="product-specs">
                        <table class="table table-bordered">
                            <tbody>
                            <tr th:each="spec : ${product.specifications}">
                                <th th:text="${spec.name}" class="table-light" style="width: 30%;">스펙 이름</th>
                                <td th:text="${spec.value}">스펙 값</td>
                            </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- 리뷰 탭 -->
                <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                    <div class="product-reviews">
                        <!-- 리뷰 요약 -->
                        <div class="review-summary mb-4">
                            <div class="row align-items-center">
                                <div class="col-md-4 text-center">
                                    <div class="review-average">
                                        <div class="average-rating" th:text="${product.rating}">4.5</div>
                                        <div class="stars">
                                            <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, product.rating)}"></i>
                                            <i class="far fa-star" th:each="i : ${#numbers.sequence(product.rating + 1, 5)}"></i>
                                        </div>
                                        <div class="total-reviews" th:text="${product.reviewCount + ' 리뷰'}">100 리뷰</div>
                                    </div>
                                </div>
                                <div class="col-md-8">
                                    <div class="rating-bars">
                                        <div class="rating-bar-item" th:each="i : ${#numbers.sequence(5, 1)}">
                                            <div class="rating-label" th:text="${i + '점'}">5점</div>
                                            <div class="progress">
                                                <div class="progress-bar bg-warning" role="progressbar"
                                                     th:style="'width: ' + ${product.ratingCounts[i-1] * 100 / product.reviewCount} + '%'"
                                                     aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
                                            </div>
                                            <div class="rating-count" th:text="${product.ratingCounts[i-1]}">70</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 리뷰 목록 -->
                        <div class="review-list">
                            <div class="review-item mb-4 pb-4 border-bottom" th:each="review : ${reviews}">
                                <div class="review-header d-flex justify-content-between mb-3">
                                    <div class="review-user">
                                        <div class="d-flex align-items-center">
                                            <div class="review-avatar me-3">
                                                <img th:src="${review.userAvatar}" alt="사용자 아바타" class="rounded-circle" width="40" height="40">
                                            </div>
                                            <div>
                                                <div class="review-username" th:text="${review.userName}">사용자명</div>
                                                <div class="review-date" th:text="${#temporals.format(review.createdAt, 'yyyy-MM-dd')}">2023-01-01</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="review-rating">
                                        <div class="stars">
                                            <i class="fas fa-star" th:each="i : ${#numbers.sequence(1, review.rating)}"></i>
                                            <i class="far fa-star" th:each="i : ${#numbers.sequence(review.rating + 1, 5)}"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="review-content mb-3" th:utext="${review.content}">
                                    리뷰 내용
                                </div>
                                <div class="review-images mb-3" th:if="${!review.images.isEmpty()}">
                                    <div class="row">
                                        <div class="col-2" th:each="image : ${review.images}">
                                            <img th:src="${image}" alt="리뷰 이미지" class="img-fluid review-image"
                                                 onclick="openImageModal(this.src)">
                                        </div>
                                    </div>
                                </div>
                                <div class="review-actions">
                                    <button class="btn btn-sm btn-outline-secondary me-2"
                                            th:onclick="'likeReview(' + ${review.id} + ')'">
                                        <i class="far fa-thumbs-up"></i> 도움됨
                                        <span th:text="${review.likeCount}">0</span>
                                    </button>
                                    <button class="btn btn-sm btn-outline-secondary"
                                            th:onclick="'reportReview(' + ${review.id} + ')'">
                                        <i class="far fa-flag"></i> 신고
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 페이지네이션 -->
                        <nav aria-label="Review pagination" class="mt-4">
                            <ul class="pagination justify-content-center">
                                <li class="page-item" th:classappend="${currentReviewPage == 1 ? 'disabled' : ''}">
                                    <a class="page-link" href="#" aria-label="Previous">
                                        <span aria-hidden="true">&laquo;</span>
                                    </a>
                                </li>
                                <li class="page-item" th:each="i : ${#numbers.sequence(1, totalReviewPages)}"
                                    th:classappend="${i == currentReviewPage ? 'active' : ''}">
                                    <a class="page-link" href="#" th:text="${i}">1</a>
                                </li>
                                <li class="page-item" th:classappend="${currentReviewPage == totalReviewPages ? 'disabled' : ''}">
                                    <a class="page-link" href="#" aria-label="Next">
                                        <span aria-hidden="true">&raquo;</span>
                                    </a>
                                </li>
                            </ul>
                        </nav>

                        <!-- 리뷰 작성 폼 -->
                        <div class="review-form mt-5" th:if="${isAuthenticated}">
                            <h4 class="mb-3">리뷰 작성</h4>
                            <form th:action="@{/shop/products/{id}/reviews(id=${product.id})}" method="post" enctype="multipart/form-data">
                                <div class="mb-3">
                                    <label for="reviewRating" class="form-label">평점</label>
                                    <div class="rating-input">
                                        <i class="far fa-star rating-star" data-rating="1"></i>
                                        <i class="far fa-star rating-star" data-rating="2"></i>
                                        <i class="far fa-star rating-star" data-rating="3"></i>
                                        <i class="far fa-star rating-star" data-rating="4"></i>
                                        <i class="far fa-star rating-star" data-rating="5"></i>
                                        <input type="hidden" name="rating" id="reviewRating" value="0">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="reviewContent" class="form-label">내용</label>
                                    <textarea class="form-control" id="reviewContent" name="content" rows="4" required></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="reviewImages" class="form-label">이미지 첨부 (최대 5개)</label>
                                    <input class="form-control" type="file" id="reviewImages" name="images" multiple accept="image/*">
                                </div>
                                <button type="submit" class="btn btn-primary">리뷰 등록</button>
                            </form>
                        </div>
                        <div class="review-login mt-5" th:unless="${isAuthenticated}">
                            <div class="alert alert-info">
                                리뷰를 작성하려면 <a th:href="@{/auth/login}">로그인</a>이 필요합니다.
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 배송/환불 정책 탭 -->
                <div class="tab-pane fade" id="shipping" role="tabpanel" aria-labelledby="shipping-tab">
                    <div class="shipping-info">
                        <h4>배송 정보</h4>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-truck me-2"></i> 배송 방법: 택배</li>
                            <li><i class="fas fa-box me-2"></i> 배송 지역: 전국</li>
                            <li><i class="fas fa-calendar-alt me-2"></i> 배송 기간: 2-3일 (주말/공휴일 제외)</li>
                            <li><i class="fas fa-money-bill-wave me-2"></i> 배송비:
                                <span th:text="${product.freeShipping ? '무료' : '3,000원'}">배송비</span>
                            </li>
                        </ul>

                        <h4 class="mt-4">교환/반품 정보</h4>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-exchange-alt me-2"></i> 교환/반품 기간: 상품 수령 후 7일 이내</li>
                            <li><i class="fas fa-exclamation-circle me-2"></i> 교환/반품 불가 사유:
                                <ul>
                                    <li>고객의 책임 있는 사유로 상품이 훼손된 경우</li>
                                    <li>고객의 사용으로 상품 가치가 현저히 감소한 경우</li>
                                    <li>시간 경과에 따라 재판매가 곤란한 정도로 상품 가치가 현저히 감소한 경우</li>
                                </ul>
                            </li>
                            <li><i class="fas fa-truck-loading me-2"></i> 반품 배송비: 고객 귀책사유로 인한 반품 시 왕복 배송비 부담</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 관련 상품 -->
    <section class="related-products py-5">
        <div class="container">
            <h2 class="section-title mb-4">관련 상품</h2>
            <div class="row">
                <div class="col-6 col-md-3 mb-4" th:each="relatedProduct : ${relatedProducts}">
                    <div class="product-card">
                        <div class="product-badge sale" th:if="${relatedProduct.discountRate > 0}"
                             th:text="${'-' + relatedProduct.discountRate + '%'}">-20%</div>
                        <a th:href="@{/shop/products/{id}(id=${relatedProduct.id})}" class="product-image">
                            <img th:src="${relatedProduct.thumbnailUrl}" alt="상품 이미지" class="img-fluid">
                        </a>
                        <div class="product-info">
                            <h3 class="product-name">
                                <a th:href="@{/shop/products/{id}(id=${relatedProduct.id})}" th:text="${relatedProduct.name}">상품명</a>
                            </h3>
                            <div class="product-price">
                                <span class="current-price" th:text="${#numbers.formatCurrency(relatedProduct.price)}">10,000원</span>
                                <span class="original-price" th:if="${relatedProduct.originalPrice > relatedProduct.price}"
                                      th:text="${#numbers.formatCurrency(relatedProduct.originalPrice)}">12,000원</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 최근 본 상품 -->
    <section class="recently-viewed py-5 bg-light">
        <div class="container">
            <h2 class="section-title mb-4">최근 본 상품</h2>
            <div class="row">
                <div class="col-6 col-md-3 mb-4" th:each="recentProduct : ${recentProducts}">
                    <div class="product-card">
                        <a th:href="@{/shop/products/{id}(id=${recentProduct.id})}" class="product-image">
                            <img th:src="${recentProduct.thumbnailUrl}" alt="상품 이미지" class="img-fluid">
                        </a>
                        <div class="product-info">
                            <h3 class="product-name">
                                <a th:href="@{/shop/products/{id}(id=${recentProduct.id})}" th:text="${recentProduct.name}">상품명</a>
                            </h3>
                            <div class="product-price">
                                <span class="current-price" th:text="${#numbers.formatCurrency(recentProduct.price)}">10,000원</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- 이미지 확대 모달 -->
    <div class="image-zoom-modal" id="imageModal" style="display: none;">
        <div class="image-zoom-content">
            <span class="image-zoom-close" onclick="closeImageModal()">&times;</span>
            <img id="zoomedImage" src="/placeholder.svg" alt="확대 이미지">
        </div>
    </div>
</div>

<th:block layout:fragment="script">
    <script>
        // 메인 이미지 변경
        function changeMainImage(imageUrl) {
            document.getElementById('mainImage').src = imageUrl;

            // 썸네일 활성화 상태 변경
            document.querySelectorAll('.thumbnail-item').forEach(item => {
                item.classList.remove('active');
            });

            event.currentTarget.classList.add('active');
        }

        // 수량 증가/감소
        function increaseQuantity() {
            const quantityInput = document.getElementById('quantity');
            const currentValue = parseInt(quantityInput.value);
            if (currentValue < 99) {
                quantityInput.value = currentValue + 1;
            }
        }

        function decreaseQuantity() {
            const quantityInput = document.getElementById('quantity');
            const currentValue = parseInt(quantityInput.value);
            if (currentValue > 1) {
                quantityInput.value = currentValue - 1;
            }
        }

        // 바로 구매하기
        function buyNow(productId, quantity) {
            // 옵션 정보 수집
            const options = collectOptions();

            // 세션 스토리지에 임시 주문 정보 저장
            const orderItem = {
                productId: productId,
                quantity: quantity,
                options: options
            };

            sessionStorage.setItem('tempOrder', JSON.stringify([orderItem]));

            // 결제 페이지로 이동
            window.location.href = '/shop/checkout?direct=true';
        }

        // 옵션 정보 수집
        function collectOptions() {
            const options = {};
            document.querySelectorAll('select[id^="option-"]').forEach(select => {
                const optionName = select.id.replace('option-', '');
                options[optionName] = select.value;
            });
            return options;
        }

        // 리뷰 별점 선택
        document.querySelectorAll('.rating-star').forEach(star => {
            star.addEventListener('click', function() {
                const rating = parseInt(this.getAttribute('data-rating'));
                document.getElementById('reviewRating').value = rating;

                // 별점 UI 업데이트
                document.querySelectorAll('.rating-star').forEach((s, index) => {
                    if (index < rating) {
                        s.classList.remove('far');
                        s.classList.add('fas');
                    } else {
                        s.classList.remove('fas');
                        s.classList.add('far');
                    }
                });
            });
        });

        // 이미지 모달
        function openImageModal(imageUrl) {
            document.getElementById('zoomedImage').src = imageUrl;
            document.getElementById('imageModal').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function closeImageModal() {
            document.getElementById('imageModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        // 리뷰 좋아요
        function likeReview(reviewId) {
            // CSRF 토큰 가져오기
            const csrfToken = document.querySelector('meta[name="_csrf"]').getAttribute('content');
            const csrfHeader = document.querySelector('meta[name="_csrf_header"]').getAttribute('content');

            fetch('/api/reviews/like', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    [csrfHeader]: csrfToken
                },
                body: JSON.stringify({
                    reviewId: reviewId
                })
            })
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        showToast('리뷰에 도움됨을 표시했습니다.', 'success');
                        // 좋아요 수 업데이트
                    } else {
                        showToast(data.message || '이미 도움됨을 표시한 리뷰입니다.', 'info');
                    }
                })
                .catch(error => {
                    console.error('리뷰 좋아요 오류:', error);
                    showToast('오류가 발생했습니다.', 'error');
                });
        }

        // 리뷰 신고
        function reportReview(reviewId) {
            // 신고 모달 표시 또는 API 호출
            if (confirm('이 리뷰를 신고하시겠습니까?')) {
                // CSRF 토큰 가져오기
                const csrfToken = document.querySelector('meta[name="_csrf"]').getAttribute('content');
                const csrfHeader = document.querySelector('meta[name="_csrf_header"]').getAttribute('content');

                fetch('/api/reviews/report', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        [csrfHeader]: csrfToken
                    },
                    body: JSON.stringify({
                        reviewId: reviewId
                    })
                })
                    .then(response => response.json())
                    .then(data => {
                        if (data.success) {
                            showToast('리뷰가 신고되었습니다.', 'success');
                        } else {
                            showToast(data.message || '이미 신고한 리뷰입니다.', 'info');
                        }
                    })
                    .catch(error => {
                        console.error('리뷰 신고 오류:', error);
                        showToast('오류가 발생했습니다.', 'error');
                    });
            }
        }

        // 소셜 공유
        function shareOnFacebook() {
            const url = encodeURIComponent(window.location.href);
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}`, '_blank');
        }

        function shareOnTwitter() {
            const url = encodeURIComponent(window.location.href);
            const text = encodeURIComponent(document.title);
            window.open(`https://twitter.com/intent/tweet?url=${url}&text=${text}`, '_blank');
        }

        function shareOnKakao() {
            // Kakao SDK 초기화 필요
            if (typeof Kakao !== 'undefined') {
                Kakao.Link.sendDefault({
                    objectType: 'commerce',
                    content: {
                        title: document.title,
                        imageUrl: document.getElementById('mainImage').src,
                        link: {
                            mobileWebUrl: window.location.href,
                            webUrl: window.location.href
                        }
                    },
                    commerce: {
                        productName: document.querySelector('.product-title').textContent,
                        regularPrice: parseInt(document.querySelector('.current-price').textContent.replace(/[^0-9]/g, ''))
                    },
                    buttons: [
                        {
                            title: '상품 보기',
                            link: {
                                mobileWebUrl: window.location.href,
                                webUrl: window.location.href
                            }
                        }
                    ]
                });
            } else {
                alert('카카오톡 공유 기능을 사용할 수 없습니다.');
            }
        }

        function copyProductLink() {
            const tempInput = document.createElement('input');
            document.body.appendChild(tempInput);
            tempInput.value = window.location.href;
            tempInput.select();
            document.execCommand('copy');
            document.body.removeChild(tempInput);

            showToast('상품 링크가 복사되었습니다.', 'success');
        }
    </script>
</th:block>
</body>
</html>