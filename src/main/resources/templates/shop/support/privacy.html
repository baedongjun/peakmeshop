<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/main-layout}">
<head>
    <title>개인정보처리방침</title>
    <th:block layout:fragment="css">
        <style>
            .privacy-card {
                border-radius: 1rem;
                box-shadow: 0 5px 15px rgba(0,0,0,0.05);
                border: none;
                margin-bottom: 1.5rem;
                overflow: hidden;
            }
            .privacy-header {
                background-color: var(--gray-100);
                padding: 1rem 1.5rem;
                border-bottom: 1px solid var(--gray-200);
            }
            .privacy-body {
                padding: 1.5rem;
            }
            .privacy-content {
                line-height: 1.7;
            }
            .privacy-content h1, .privacy-content h2, .privacy-content h3,
            .privacy-content h4, .privacy-content h5, .privacy-content h6 {
                margin-top: 1.5rem;
                margin-bottom: 1rem;
            }
            .privacy-content p {
                margin-bottom: 1rem;
            }
            .privacy-content ul, .privacy-content ol {
                margin-bottom: 1rem;
                padding-left: 1.5rem;
            }
            .privacy-content li {
                margin-bottom: 0.5rem;
            }
            .privacy-nav .list-group-item {
                border-radius: 0;
                border-left: 3px solid transparent;
                cursor: pointer;
                transition: all 0.2s ease;
            }
            .privacy-nav .list-group-item.active {
                background-color: var(--gray-100);
                border-left-color: var(--primary-color);
                color: var(--primary-color);
                font-weight: 500;
            }
            .privacy-nav .list-group-item:hover:not(.active) {
                background-color: var(--gray-50);
            }
            .privacy-info {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding-bottom: 1rem;
                margin-bottom: 1.5rem;
                border-bottom: 1px solid var(--gray-200);
            }
            .privacy-date {
                color: var(--gray-600);
                font-size: 0.875rem;
            }
            .update-mark {
                display: inline-block;
                padding: 0.25rem 0.5rem;
                border-radius: 50rem;
                font-size: 0.75rem;
                font-weight: 600;
                text-transform: uppercase;
                background-color: var(--warning-color);
                color: white;
                margin-left: 0.5rem;
            }
            .privacy-table {
                width: 100%;
                border-collapse: collapse;
                margin-bottom: 1.5rem;
            }
            .privacy-table th, .privacy-table td {
                padding: 0.75rem;
                border: 1px solid var(--gray-300);
            }
            .privacy-table th {
                background-color: var(--gray-100);
                font-weight: 500;
                text-align: center;
            }
            .privacy-table tr:nth-child(even) {
                background-color: var(--gray-50);
            }
            .privacy-section {
                scroll-margin-top: 2rem;
            }
        </style>
    </th:block>
</head>
<body>
<main layout:fragment="content">
    <div class="container py-5">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>개인정보처리방침</h2>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb mb-0">
                    <li class="breadcrumb-item"><a th:href="@{/}">홈</a></li>
                    <li class="breadcrumb-item active" aria-current="page">개인정보처리방침</li>
                </ol>
            </nav>
        </div>
        
        <div class="row">
            <div class="col-lg-3 mb-4">
                <!-- 목차 네비게이션 -->
                <div class="privacy-card sticky-top" style="top: 20px; z-index: 10;">
                    <div class="privacy-header">
                        <h5 class="mb-0">목차</h5>
                    </div>
                    <div class="privacy-body p-0">
                        <div class="list-group list-group-flush privacy-nav">
                            <a href="#section1" class="list-group-item active">1. 개인정보 수집・이용</a>
                            <a href="#section2" class="list-group-item">2. 개인정보 수집 방법</a>
                            <a href="#section3" class="list-group-item">3. 개인정보 제3자 제공</a>
                            <a href="#section4" class="list-group-item">4. 개인정보 처리 위탁</a>
                            <a href="#section5" class="list-group-item">5. 개인정보 보유 기간</a>
                            <a href="#section6" class="list-group-item">6. 정보주체 권리</a>
                            <a href="#section7" class="list-group-item">7. 개인정보 안전성 조치</a>
                            <a href="#section8" class="list-group-item">8. 개인정보 보호책임자</a>
                            <a href="#section9" class="list-group-item">9. 개인정보 침해 신고</a>
                            <a href="#section10" class="list-group-item">10. 이전 개인정보처리방침</a>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-9">
                <!-- 개인정보처리방침 내용 -->
                <div class="privacy-card">
                    <div class="privacy-header">
                        <div class="d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">개인정보처리방침</h5>
                            <a th:href="@{/privacy/pdf}" target="_blank" class="btn btn-sm btn-outline-primary">
                                <i class="fas fa-file-pdf me-1"></i> PDF 다운로드
                            </a>
                        </div>
                    </div>
                    <div class="privacy-body">
                        <div class="privacy-info">
                            <div>
                                <span class="privacy-date">시행일: <span th:text="${privacy != null ? #temporals.format(privacy.effectiveDate, 'yyyy년 MM월 dd일') : '2023년 01월 01일'}">2023년 01월 01일</span></span>
                                <span class="update-mark" th:if="${privacy != null && privacy.isUpdated}">개정</span>
                            </div>
                            <div class="text-muted small">
                                최종 수정일: <span th:text="${privacy != null ? #temporals.format(privacy.updatedAt, 'yyyy-MM-dd') : '2023-01-01'}">2023-01-01</span>
                            </div>
                        </div>
                        
                        <div class="privacy-content" th:utext="${privacy != null ? privacy.content : defaultPrivacy}">
                            <p>PeakMeShop(이하 '회사')은 이용자의 개인정보를 중요시하며, 「정보통신망 이용촉진 및 정보보호 등에 관한 법률」, 「개인정보 보호법」 등 관련 법령을 준수하기 위하여 노력하고 있습니다. 회사는 이용자로부터 수집한 개인정보를 보호하고 이와 관련한 고충을 신속하고 원활하게 처리할 수 있도록 하기 위하여 다음과 같이 개인정보처리방침을 수립·공개합니다.</p>
                            
                            <section id="section1" class="privacy-section">
                                <h4>1. 개인정보 수집・이용</h4>
                                <p>회사는 다음과 같이 이용자의 개인정보를 수집합니다. 처리하고 있는 개인정보는 다음의 수집・이용 목적 이외의 용도로는 이용되지 않으며, 수집・이용 목적이 변경되는 경우에는 개인정보 보호법 제18조에 따라 별도의 동의를 받는 등 필요한 조치를 이행합니다.</p>
                                
                                <h5>1.1 필수항목</h5>
                                <table class="privacy-table">
                                    <thead>
                                        <tr>
                                            <th>수집 항목</th>
                                            <th>수집・이용 목적</th>
                                            <th>보유 기간</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>아이디, 비밀번호, 이름, 생년월일, 성별, 이메일, 휴대폰 번호</td>
                                            <td>회원 가입 및 관리, 서비스 제공, 고객 상담</td>
                                            <td>회원 탈퇴 시까지</td>
                                        </tr>
                                        <tr>
                                            <td>주문자 정보(이름, 연락처, 이메일), 배송지 정보(수령인, 연락처, 주소), 결제 정보</td>
                                            <td>상품 주문, 결제, 배송</td>
                                            <td>전자상거래법에 따른 보존 기간</td>
                                        </tr>
                                        <tr>
                                            <td>IP 주소, 쿠키, 방문 일시, 서비스 이용 기록</td>
                                            <td>서비스 이용 분석, 부정 이용 방지</td>
                                            <td>3개월</td>
                                        </tr>
                                    </tbody>
                                </table>
                                
                                <h5>1.2 선택항목</h5>
                                <table class="privacy-table">
                                    <thead>
                                        <tr>
                                            <th>수집 항목</th>
                                            <th>수집・이용 목적</th>
                                            <th>보유 기간</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>마케팅 수신 동의(이메일, SMS)</td>
                                            <td>이벤트, 프로모션, 마케팅 정보 제공</td>
                                            <td>회원 탈퇴 또는 동의 철회 시까지</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>
                            
                            <section id="section2" class="privacy-section">
                                <h4>2. 개인정보 수집 방법</h4>
                                <p>회사는 다음과 같은 방법으로 개인정보를 수집합니다.</p>
                                <ul>
                                    <li>홈페이지, 모바일 앱, 서면 양식, 팩스, 전화, 상담 게시판, 이메일, 이벤트 응모</li>
                                    <li>생성정보 수집 툴을 통한 자동 수집</li>
                                </ul>
                            </section>
                            
                            <section id="section3" class="privacy-section">
                                <h4>3. 개인정보 제3자 제공</h4>
                                <p>회사는 이용자의 개인정보를 본 개인정보처리방침에서 고지한 범위 내에서만 처리하며, 이용자의 동의, 법률의 특별한 규정 등 개인정보 보호법 제17조 및 제18조에 해당하는 경우에만 개인정보를 제3자에게 제공합니다.</p>
                                
                                <h5>3.1 개인정보 제3자 제공 현황</h5>
                                <table class="privacy-table">
                                    <thead>
                                        <tr>
                                            <th>제공받는 자</th>
                                            <th>제공 목적</th>
                                            <th>제공 항목</th>
                                            <th>보유 기간</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>물류 배송업체</td>
                                            <td>상품 배송</td>
                                            <td>수령인 정보(이름, 연락처, 주소)</td>
                                            <td>배송 완료 후 3개월</td>
                                        </tr>
                                        <tr>
                                            <td>결제 대행업체</td>
                                            <td>결제 처리</td>
                                            <td>결제 정보</td>
                                            <td>전자상거래법에 따른 보존 기간</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>
                            
                            <section id="section4" class="privacy-section">
                                <h4>4. 개인정보 처리 위탁</h4>
                                <p>회사는 서비스 향상을 위해서 아래와 같이 개인정보 처리 업무를 위탁하고 있으며, 관계 법령에 따라 위탁계약 시 개인정보가 안전하게 관리될 수 있도록 필요한 사항을 규정하고 있습니다.</p>
                                
                                <table class="privacy-table">
                                    <thead>
                                        <tr>
                                            <th>수탁업체</th>
                                            <th>위탁 업무 내용</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>OO호스팅</td>
                                            <td>서버 운영 및 관리</td>
                                        </tr>
                                        <tr>
                                            <td>OO고객센터</td>
                                            <td>고객 상담 및 응대</td>
                                        </tr>
                                        <tr>
                                            <td>OO마케팅</td>
                                            <td>이벤트, 프로모션 진행 및 마케팅</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>
                            
                            <section id="section5" class="privacy-section">
                                <h4>5. 개인정보 보유 기간</h4>
                                <p>회사는 원칙적으로 개인정보 수집 및 이용목적이 달성된 후에는 해당 정보를 지체 없이 파기합니다. 단, 다음의 정보에 대해서는 아래의 이유로 명시한 기간 동안 보존합니다.</p>
                                
                                <h5>5.1 법령에 따른 보존</h5>
                                <table class="privacy-table">
                                    <thead>
                                        <tr>
                                            <th>보존 항목</th>
                                            <th>보존 기간</th>
                                            <th>근거 법령</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>계약 또는 청약철회 등에 관한 기록</td>
                                            <td>5년</td>
                                            <td>전자상거래 등에서의 소비자보호에 관한 법률</td>
                                        </tr>
                                        <tr>
                                            <td>대금결제 및 재화 등의 공급에 관한 기록</td>
                                            <td>5년</td>
                                            <td>전자상거래 등에서의 소비자보호에 관한 법률</td>
                                        </tr>
                                        <tr>
                                            <td>소비자의 불만 또는 분쟁처리에 관한 기록</td>
                                            <td>3년</td>
                                            <td>전자상거래 등에서의 소비자보호에 관한 법률</td>
                                        </tr>
                                        <tr>
                                            <td>표시/광고에 관한 기록</td>
                                            <td>6개월</td>
                                            <td>전자상거래 등에서의 소비자보호에 관한 법률</td>
                                        </tr>
                                        <tr>
                                            <td>세법이 규정하는 거래 관련 정보</td>
                                            <td>5년</td>
                                            <td>국세기본법, 법인세법, 부가가치세법 등</td>
                                        </tr>
                                        <tr>
                                            <td>통신비밀보호법에 따른 통신사실확인자료</td>
                                            <td>3개월</td>
                                            <td>통신비밀보호법</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>
                            
                            <section id="section6" class="privacy-section">
                                <h4>6. 정보주체의 권리・의무 및 행사 방법</h4>
                                <p>이용자는 개인정보주체로서 다음과 같은 권리를 행사할 수 있습니다.</p>
                                <ol>
                                    <li>개인정보 열람 요구</li>
                                    <li>오류 등이 있을 경우 정정 요구</li>
                                    <li>삭제 요구</li>
                                    <li>처리정지 요구</li>
                                </ol>
                                <p>상기 권리 행사는 회사에 대해 서면, 전화, 이메일, 팩스 등을 통하여 하실 수 있으며 회사는 이에 대해 지체없이 조치하겠습니다.</p>
                            </section>
                            
                            <section id="section7" class="privacy-section">
                                <h4>7. 개인정보 안전성 확보 조치</h4>
                                <p>회사는 개인정보 보호법 제29조에 따라 다음과 같이 안전성 확보에 필요한 기술적, 관리적, 물리적 조치를 하고 있습니다.</p>
                                <ol>
                                    <li>개인정보 취급 직원 최소화 및 교육 실시</li>
                                    <li>내부관리계획 수립 및 시행</li>
                                    <li>개인정보에 대한 접근 제한</li>
                                    <li>비밀번호 암호화</li>
                                    <li>보안프로그램 설치 및 주기적 점검・갱신</li>
                                    <li>비인가자에 대한 출입 통제</li>
                                </ol>
                            </section>
                            
                            <section id="section8" class="privacy-section">
                                <h4>8. 개인정보 보호책임자</h4>
                                <p>회사는 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 정보주체의 불만처리 및 피해구제 등을 위하여 아래와 같이 개인정보 보호책임자를 지정하고 있습니다.</p>
                                
                                <table class="privacy-table">
                                    <tbody>
                                        <tr>
                                            <th style="width: 30%;">개인정보 보호책임자</th>
                                            <td>홍길동 (개인정보팀)</td>
                                        </tr>
                                        <tr>
                                            <th>연락처</th>
                                            <td>02-123-4567 / privacy@peakmeshop.com</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>
                            
                            <section id="section9" class="privacy-section">
                                <h4>9. 개인정보 침해 신고</h4>
                                <p>개인정보 침해에 대한 신고나 상담이 필요하신 경우 아래 기관에 문의하시기 바랍니다.</p>
                                <ul>
                                    <li>개인정보침해신고센터 : (국번없이) 118 / privacy.kisa.or.kr</li>
                                    <li>개인정보 분쟁조정위원회 : 1833-6972 / www.kopico.go.kr</li>
                                    <li>대검찰청 사이버범죄수사단 : (국번없이) 1301 / www.spo.go.kr</li>
                                    <li>경찰청 사이버안전국 : (국번없이) 182 / cyberbureau.police.go.kr</li>
                                </ul>
                            </section>
                            
                            <section id="section10" class="privacy-section">
                                <h4>10. 이전 개인정보처리방침</h4>
                                <p>이전 개인정보처리방침은 아래에서 확인하실 수 있습니다.</p>
                                <ul>
                                    <li><a href="#" class="text-primary">2023년 01월 01일 시행 (현재)</a></li>
                                </ul>
                            </section>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<th:block layout:fragment="script">
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 목차 클릭 이벤트
            const navLinks = document.querySelectorAll('.privacy-nav a');
            
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // 모든 링크에서 active 클래스 제거
                    navLinks.forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // 클릭한 링크에 active 클래스 추가
                    this.classList.add('active');
                    
                    // 해당 섹션으로 스크롤
                    const targetId = this.getAttribute('href');
                    const targetSection = document.querySelector(targetId);
                    
                    if (targetSection) {
                        window.scrollTo({
                            top: targetSection.offsetTop - 20,
                            behavior: 'smooth'
                        });
                    }
                });
            });
            
            // 스크롤 시 현재 섹션에 해당하는 목차 활성화
            const sections = document.querySelectorAll('.privacy-section');
            
            window.addEventListener('scroll', function() {
                let current = '';
                
                sections.forEach(section => {
                    const sectionTop = section.offsetTop - 100;
                    const sectionHeight = section.offsetHeight;
                    
                    if (window.pageYOffset >= sectionTop && window.pageYOffset < sectionTop + sectionHeight) {
                        current = '#' + section.getAttribute('id');
                    }
                });
                
                if (current) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === current) {
                            link.classList.add('active');
                        }
                    });
                }
            });
        });
    </script>
</th:block>
</body>
</html>
