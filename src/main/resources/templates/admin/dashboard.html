<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/admin-layout}">
<head>
    <title>대시보드</title>
    <th:block layout:fragment="css">
        <style>
            .stat-card {
                border-radius: 10px;
                transition: transform 0.3s;
            }
            .stat-card:hover {
                transform: translateY(-5px);
            }
            .chart-container {
                height: 300px;
            }
        </style>
    </th:block>
</head>
<body>
<!-- 페이지 제목 -->
<h1 layout:fragment="page-title">대시보드</h1>

<!-- 페이지 내용 -->
<div layout:fragment="content">
    <!-- 통계 카드 -->
    <div class="row mb-4">
        <div class="col-md-3 mb-3">
            <div class="admin-card stat-card border-start border-5 border-primary">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="text-muted mb-1">총 주문</h6>
                        <h3 class="mb-0">254</h3>
                        <p class="text-success mb-0"><i class="fas fa-arrow-up"></i> 12% 증가</p>
                    </div>
                    <div class="bg-light p-3 rounded">
                        <i class="fas fa-shopping-cart fa-2x text-primary"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="admin-card stat-card border-start border-5 border-success">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="text-muted mb-1">총 매출</h6>
                        <h3 class="mb-0">₩12,345,678</h3>
                        <p class="text-success mb-0"><i class="fas fa-arrow-up"></i> 8% 증가</p>
                    </div>
                    <div class="bg-light p-3 rounded">
                        <i class="fas fa-won-sign fa-2x text-success"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="admin-card stat-card border-start border-5 border-info">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="text-muted mb-1">총 회원</h6>
                        <h3 class="mb-0">1,234</h3>
                        <p class="text-success mb-0"><i class="fas fa-arrow-up"></i> 5% 증가</p>
                    </div>
                    <div class="bg-light p-3 rounded">
                        <i class="fas fa-users fa-2x text-info"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="admin-card stat-card border-start border-5 border-warning">
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <h6 class="text-muted mb-1">총 상품</h6>
                        <h3 class="mb-0">567</h3>
                        <p class="text-success mb-0"><i class="fas fa-arrow-up"></i> 3% 증가</p>
                    </div>
                    <div class="bg-light p-3 rounded">
                        <i class="fas fa-box fa-2x text-warning"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 차트 -->
    <div class="row mb-4">
        <div class="col-md-8 mb-3">
            <div class="admin-card">
                <h5 class="mb-3">월별 매출 추이</h5>
                <div class="chart-container">
                    <canvas id="salesChart"></canvas>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3">
            <div class="admin-card">
                <h5 class="mb-3">카테고리별 판매 비율</h5>
                <div class="chart-container">
                    <canvas id="categoryChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- 최근 주문 및 활동 -->
    <div class="row">
        <div class="col-md-6 mb-3">
            <div class="admin-card">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">최근 주문</h5>
                    <a th:href="@{/admin/orders}" class="btn btn-sm btn-outline-primary">모두 보기</a>
                </div>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th>주문번호</th>
                            <th>고객</th>
                            <th>금액</th>
                            <th>상태</th>
                            <th>날짜</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr>
                            <td>#ORD-1234</td>
                            <td>홍길동</td>
                            <td>₩123,000</td>
                            <td><span class="badge bg-success">배송완료</span></td>
                            <td>2023-11-15</td>
                        </tr>
                        <tr>
                            <td>#ORD-1233</td>
                            <td>김철수</td>
                            <td>₩45,000</td>
                            <td><span class="badge bg-warning">배송중</span></td>
                            <td>2023-11-14</td>
                        </tr>
                        <tr>
                            <td>#ORD-1232</td>
                            <td>이영희</td>
                            <td>₩78,500</td>
                            <td><span class="badge bg-info">결제완료</span></td>
                            <td>2023-11-14</td>
                        </tr>
                        <tr>
                            <td>#ORD-1231</td>
                            <td>박지민</td>
                            <td>₩235,000</td>
                            <td><span class="badge bg-primary">상품준비중</span></td>
                            <td>2023-11-13</td>
                        </tr>
                        <tr>
                            <td>#ORD-1230</td>
                            <td>최유진</td>
                            <td>₩56,000</td>
                            <td><span class="badge bg-success">배송완료</span></td>
                            <td>2023-11-12</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="col-md-6 mb-3">
            <div class="admin-card">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">최근 활동</h5>
                    <a href="#" class="btn btn-sm btn-outline-primary">모두 보기</a>
                </div>
                <ul class="list-group list-group-flush">
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-user-plus text-success me-2"></i>
                            <span>새 회원 가입: <strong>김민지</strong></span>
                        </div>
                        <span class="text-muted small">10분 전</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-shopping-cart text-primary me-2"></i>
                            <span>새 주문: <strong>#ORD-1235</strong></span>
                        </div>
                        <span class="text-muted small">25분 전</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-box text-warning me-2"></i>
                            <span>상품 재고 부족: <strong>프리미엄 티셔츠</strong></span>
                        </div>
                        <span class="text-muted small">1시간 전</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-truck text-info me-2"></i>
                            <span>배송 시작: <strong>#ORD-1233</strong></span>
                        </div>
                        <span class="text-muted small">2시간 전</span>
                    </li>
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        <div>
                            <i class="fas fa-star text-warning me-2"></i>
                            <span>새 리뷰: <strong>프리미엄 후드티</strong> (★★★★★)</span>
                        </div>
                        <span class="text-muted small">3시간 전</span>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</div>

<!-- 페이지별 스크립트 -->
<th:block layout:fragment="script">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        // 월별 매출 차트
        const salesCtx = document.getElementById('salesChart').getContext('2d');
        const salesChart = new Chart(salesCtx, {
            type: 'line',
            data: {
                labels: ['1월', '2월', '3월', '4월', '5월', '6월', '7월', '8월', '9월', '10월', '11월', '12월'],
                datasets: [{
                    label: '월별 매출 (만원)',
                    data: [1200, 1900, 1500, 2000, 2200, 2700, 2400, 2800, 3100, 3300, 3500, 3800],
                    backgroundColor: 'rgba(54, 162, 235, 0.2)',
                    borderColor: 'rgba(54, 162, 235, 1)',
                    borderWidth: 2,
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // 카테고리별 판매 비율 차트
        const categoryCtx = document.getElementById('categoryChart').getContext('2d');
        const categoryChart = new Chart(categoryCtx, {
            type: 'doughnut',
            data: {
                labels: ['의류', '신발', '액세서리', '스포츠용품', '아웃도어'],
                datasets: [{
                    data: [35, 25, 15, 15, 10],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(255, 206, 86, 0.7)',
                        'rgba(75, 192, 192, 0.7)',
                        'rgba(153, 102, 255, 0.7)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right'
                    }
                }
            }
        });
    </script>
</th:block>
</body>
</html>
